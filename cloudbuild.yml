steps:
# Step 1: Clone the repository from GitHub
- name: 'gcr.io/cloud-builders/git'
  args: ['clone','-b','main', 'https://github.com/aparnanashte/genGi.git']
  
# Build the Maven project
- name: 'gcr.io/cloud-builders/mvn'
  args: ['build']
  dir: '/workspace/genGi
  
# Step 2: Build the Docker image with an auto-generated 
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'europe-west3-docker.pkg.dev/${_PROJECT_ID}/${_REPO_NAME}/${_IMAGE_NAME}','/workspace/genGi/']
 
# Step 3: Push the Docker image to the container registry
- name: 'gcr.io/cloud-builders/docker'
  args: ['push', 'europe-west3-docker.pkg.dev/${_PROJECT_ID}/${_REPO_NAME}/${_IMAGE_NAME}']
substitutions:
  _IMAGE_NAME: 'genGi'
  _PROJECT_ID: 'glb-fs-wgh-app-dev'
  _REPO_NAME: 'genGi1'  
options:
  logging: CLOUD_LOGGING_ONLY

